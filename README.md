# 照片文件筛选与重命名工具

本项目提供一套简洁而强大的脚本，可对大批量照片依据文件名中的文字或数字片段进行筛选，并将符合条件的图片复制到指定位置。与此同时，脚本会按照预先准备的参考表格为文件赋予更具语义的名称，以实现更高效的整理与归档。

## 核心功能

- **智能检索**：解析文件名中的标识符（可为文字或数字），并与参考表中的记录进行匹配。
- **批量归档**：将匹配到的图片复制至目标目录，自动保留原文件扩展名。
- **自定义命名**：依据参考表中的备注字段重命名文件，使输出结果更具可读性。
- **多格式支持**：兼容 CSV 及 Excel（.xlsx/.xls）格式的参考表格。
- **模糊匹配**：若未找到完全匹配的标识符，脚本会尝试寻找最接近的项，以减少遗漏。
- **AI 智能匹配**：利用 TF-IDF 与余弦相似度，进一步提升模糊匹配的准确性。

## 安装依赖

运行前请确保环境中已安装以下 Python 库：

```bash
pip install pandas openpyxl scikit-learn
```

## 参考表格式要求

参考表需包含两列：
1. **标识符**：用于与文件名中的片段匹配，支持文字或数字。
2. **备注信息**：匹配成功后将作为新文件名使用。

示例参考表格可在仓库中的 `example_reference.csv` 中找到。

## 使用指南

```bash
python file_filter.py --source <源文件夹路径> --target <目标文件夹路径> --reference <参考表路径>
```

### 命令行参数

- `--source` 或 `-s`：包含待筛选照片的源目录。
- `--target` 或 `-t`：输出目录，不存在时会自动创建。
- `--reference` 或 `-r`：参考表格的文件路径。

### 示例

```bash
python file_filter.py --source /path/to/photos --target /path/to/output --reference example_reference.csv
```

## 重要说明

1. 脚本仅对文件名中包含参考表格标识符的图片生效，其他文件将被忽略。
2. 当目标目录已存在同名文件时，脚本会在新文件名后追加数字后缀以避免覆盖。
3. 脚本仅复制并重命名文件，不会修改原始图片。

## 运行效果示例

给定如下文件：
- 源目录：`/photos/IMG_1234.jpg`、`/photos/holiday.png`
- 参考表：
  ```
  标识符,备注
  1234,北京风景照
  holiday,假日照片
  ```

执行脚本后，目标目录将生成：
- `/output/北京风景照.jpg`
- `/output/假日照片.png`

